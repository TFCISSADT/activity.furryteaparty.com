(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{426:function(t,e,n){"use strict";n.r(e);n(36),n(19),n(42),n(22),n(17),n(20),n(41),n(43),n(23);var o=n(3),r=(n(25),n(86),n(11),n(40),n(241),n(387)),c=n(384),l=n(133);function d(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return k(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,r=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw r}}}}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var _={components:{QrcodeVue:r.a,AttendeeStatus:c.default},data:function(){return{loading:!0,abandonTaskDialog:{show:!1,taskID:null},taskInfoModal:{show:!1,status:null},answerTaskModal:{show:!1,taskID:null,answer:null,finishMessage:null},tasks:[],items:[],taskStatus:[]}},computed:{},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("app/setTitle",t.$t("activity.tasks.title")),e.next=3,t.getTasks();case 3:t.$route.query.completedTaskID&&(n=t.taskStatus.find((function(e){return e.task_id==t.$route.query.completedTaskID&&"COMPLETED"==e.ftp_task_status})),t.answerTaskModal.finishMessage=t.$t("activity.enums.tasks."+n.task.task_code+"Finish"),t.answerTaskModal.show=!0);case 4:case"end":return e.stop()}}),e)})))()},methods:{getTasks:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$axios.get("/api/activity/tasks").then((function(e){t.tasks=e.data.tasks,t.items=e.data.items,t.taskStatus=e.data.taskStatus.filter((function(t){return t.task_id}));var n,o=d(t.taskStatus);try{for(o.s();!(n=o.n()).done;){var r,c=n.value;c.task=t.tasks[c.task_id],c.item=t.items[null===(r=c.task)||void 0===r?void 0:r.ftp_task_reward_item]}}catch(t){o.e(t)}finally{o.f()}t.taskStatus.sort((function(a,b){var t={ACTIVE:1,COMPLETED:2,FAILED:3,ABANDONED:4,CANCELLED:5};return t[a.ftp_task_status]-t[b.ftp_task_status]}))}));case 3:t.loading=!1;case 4:case"end":return e.stop()}}),e)})))()},statusColor:function(t){return{ACTIVE:{color:"rgba(110, 218, 228)",text:"#333"},COMPLETED:{color:"#BBFCC0",text:"rgba(38, 56, 75)"},ABANDONED:{color:"rgba(255, 177, 177)",text:"#333"},CANCELLED:{color:"rgba(167, 146, 123)",text:"#000"},FAILED:{color:"rgba(255, 177, 177)",text:"#333"}}[t]},abandonTask:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$axios.delete("/api/activity/task/".concat(t.abandonTaskDialog.taskID)).then((function(e){l.a.showSnackbar({message:t.$t("activity.tasks.messages.abandonTaskSucceed"),colorType:"positive"}),t.getTasks(),t.abandonTaskDialog.show=!1})).catch((function(t){l.a.showRequestError(t)}));case 3:t.loading=!1;case 4:case"end":return e.stop()}}),e)})))()},submitAnswerTask:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$axios.post("/api/activity/task/".concat(t.answerTaskModal.taskID,"/answer"),{data:t.answerTaskModal.answer}).then((function(e){l.a.showSnackbar({message:t.$t("activity.tasks.messages.answerTaskSucceed"),colorType:"positive"}),t.getTasks(),t.$t("activity.enums.tasks."+t.answerTaskModal.taskID+"Finish")?t.answerTaskModal.finishMessage=t.$t("activity.enums.tasks."+t.answerTaskModal.task.task_code+"Finish"):t.answerTaskModal.show=!1})).catch((function(t){l.a.showRequestError(t)}));case 3:t.loading=!1;case 4:case"end":return e.stop()}}),e)})))()}}},f=n(38),component=Object(f.a)(_,(function(){var t=this,e=this,n=e._self._c;return n("div",[n("Loading",{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}}),e._v(" "),n("div",{staticClass:"display:grid grid-template-columns:1fr|1fr@>sm grid-template-columns:1fr@<=sm gap:32 w:100%"},e._l(e.taskStatus,(function(t){return n("div",{key:t.task_history_id,staticClass:"bg:white p:24 border-radius:4 border drop-shadow flex flex-direction:column justify-content:space-between position:relative w:100% min-w:0"},[n("div",{staticClass:"mb:32"},[n("div",{staticClass:"font-size:1.4rem max-w:100% word-break:break-all"},[e._v("\n          "+e._s(e.$t("activity.enums.tasks."+t.task.task_code))+"\n        ")]),e._v(" "),n("div",{staticClass:"font-size:1rem mt:16 word-break:break-all"},[e._v("\n          "+e._s(e.$t("activity.enums.tasks."+t.task.task_code+"Description")=="activity.enums.tasks."+t.task.task_code+"Description"?"":e.$t("activity.enums.tasks."+t.task.task_code+"Description"))+"\n        ")])]),e._v(" "),n("div",{staticClass:"mt:16 bottom:0 right:0 position:absolute font-weight:bold flex"},["ACTIVE"==t.ftp_task_status&&"INPUTANSWER"==t.task.ftp_task_resolve_method?n("div",{staticClass:"p:8|32|8|16 mr:-16 border-radius:16|0|0|0 bg:#33B5E5 color:#fff p:8|48|8|32:hover transition:0.3s cursor:pointer",on:{click:function(n){e.answerTaskModal.show=!0,e.answerTaskModal.taskID=t.task_id,e.answerTaskModal.task=t.task,e.answerTaskModal.answer="",e.answerTaskModal.finishMessage=null}}},[e._v("\n          "+e._s(e.$t("activity.tasks.actions.answerTask"))+"\n        ")]):e._e(),e._v(" "),n("div",{staticClass:"p:8|32|8|16 mr:-16 border-radius:16|0|0|0 bg:#5C59C1 color:#fff p:8|48|8|32:hover transition:0.3s cursor:pointer",on:{click:function(n){e.taskInfoModal.show=!0,e.taskInfoModal.status=t}}},[e._v("\n          "+e._s(e.$t("activity.tasks.actions.taskInfo"))+"\n        ")]),e._v(" "),"ACTIVE"==t.ftp_task_status?n("div",{staticClass:"p:8|32|8|16 mr:-16 border-radius:16|0|0|0 bg:#F42727 color:#fff p:8|48|8|32:hover transition:0.3s cursor:pointer",on:{click:function(n){e.abandonTaskDialog.show=!0,e.abandonTaskDialog.taskID=t.task_id}}},[e._v("\n          "+e._s(e.$t("activity.tasks.actions.abandonTask"))+"\n        ")]):e._e(),e._v(" "),n("div",{staticClass:"p:8|16 border-radius:12|0|0|0",style:{backgroundColor:e.statusColor(t.ftp_task_status).color,color:e.statusColor(t.ftp_task_status).text}},[e._v("\n          "+e._s(e.$t("activity.tasks.enums.taskStatus."+t.ftp_task_status))+"\n        ")])])])})),0),e._v(" "),n("Dialog",{attrs:{title:e.$t("activity.tasks.messages.confirmAbandonTask"),description:e.$t("activity.tasks.messages.confirmAbandonTaskDescription"),yesText:e.$t("activity.tasks.actions.abandonTask"),yesType:"negative",noText:e.$t("common.actions.cancel"),noType:"secondary"},on:{yes:e.abandonTask,no:function(t){e.abandonTaskDialog.show=!1}},model:{value:e.abandonTaskDialog.show,callback:function(t){e.$set(e.abandonTaskDialog,"show",t)},expression:"abandonTaskDialog.show"}}),e._v(" "),e.taskInfoModal.show?n("Modal",{model:{value:e.taskInfoModal.show,callback:function(t){e.$set(e.taskInfoModal,"show",t)},expression:"taskInfoModal.show"}},[n("div",{staticClass:"round border drop-shadow bg:white p:32|32 flex flex-direction:column gap:16"},[n("div",{staticClass:"font-size:1.6rem font-weight:bold"},[e._v("\n        "+e._s(e.$t("activity.tasks.messages.taskInfo"))+"\n      ")]),e._v(" "),e.taskInfoModal.status.task.ftp_task_icon?n("img",{staticClass:"w:50vh@>sm w:100%@<=sm h:auto p:16",attrs:{src:e.taskInfoModal.status.task.ftp_task_icon}}):e._e(),e._v(" "),n("div",{staticClass:"flex flex-direction:column gap:8 font-size:1.2rem"},[n("div",{staticClass:"align-self:center font-size:1.4rem my:4 word-break:break-all"},[e._v("\n          "+e._s(e.$t("activity.enums.tasks."+e.taskInfoModal.status.task.task_code))+"\n        ")]),e._v(" "),"COMPLETED"==e.taskInfoModal.status.ftp_task_status?n("div",{staticClass:"align-self:center font-size:1.4rem my:4 word-break:break-all"},[e._v("\n          "+e._s(e.$t("activity.enums.tasks."+e.taskInfoModal.status.task.task_code+"Finish"))+"\n        ")]):e._e(),e._v(" "),e.taskInfoModal.status.task.ftp_task_consume_stamina?n("div",[e._v("\n          "+e._s(e.$t("activity.tasks.fields.ftp_task_consume_stamina"))+":\n          "+e._s(e.taskInfoModal.status.task.ftp_task_consume_stamina)+"\n        ")]):e._e(),e._v(" "),e.taskInfoModal.status.task.ftp_task_is_group_task?n("div",[e._v("\n          "+e._s(e.$t("activity.tasks.fields.ftp_task_is_group_task"))+":\n          "+e._s(e.$t("common.yes"))+"\n        ")]):e._e(),e._v(" "),e.taskInfoModal.status.task.ftp_task_require_team_size?n("div",[e._v("\n          "+e._s(e.$t("activity.tasks.fields.ftp_task_require_team_size"))+":\n          "+e._s(e.taskInfoModal.status.task.ftp_task_require_team_size)+"\n        ")]):e._e(),e._v(" "),e.taskInfoModal.status.task.ftp_task_require_points?n("div",[e._v("\n          "+e._s(e.$t("activity.tasks.fields.ftp_task_require_points"))+":\n          "+e._s(e.taskInfoModal.status.task.ftp_task_require_points)+"\n        ")]):e._e(),e._v(" "),e.taskInfoModal.status.task.ftp_task_require_job_formation?n("div",[e._v("\n          "+e._s(e.$t("activity.tasks.fields.ftp_task_require_job_formation"))+":\n          "+e._s(e.taskInfoModal.status.task.ftp_task_require_job_formation)+"\n        ")]):e._e(),e._v(" "),n("div",[e._v("\n          "+e._s(e.$t("activity.tasks.fields.ftp_task_resolve_method"))+":\n          "+e._s(e.$t("activity.tasks.enums.resolveMethods."+e.taskInfoModal.status.task.ftp_task_resolve_method))+"\n        ")]),e._v(" "),e.taskInfoModal.status.task.ftp_task_reward_item?n("div",[e._v("\n          "+e._s(e.$t("activity.tasks.fields.ftp_task_reward_item"))+":\n          "+e._s(e.$t("activity.enums.items."+e.taskInfoModal.status.item.ftp_item_system_name)=="activity.enums.items."+e.taskInfoModal.status.item.ftp_item_system_name?e.taskInfoModal.status.item.ftp_item_name:e.$t("activity.enums.items."+e.taskInfoModal.status.item.ftp_item_system_name))+"\n        ")]):e._e()]),e._v(" "),n("div",{staticClass:"flex justify-content:flex-end"},[n("Button",{attrs:{type:"secondary"},on:{click:function(t){e.taskInfoModal.show=!1}}},[e._v("\n          "+e._s(e.$t("common.actions.close"))+"\n        ")])],1)])]):e._e(),e._v(" "),e.answerTaskModal.show?n("Modal",{model:{value:e.answerTaskModal.show,callback:function(t){e.$set(e.answerTaskModal,"show",t)},expression:"answerTaskModal.show"}},[null===e.answerTaskModal.finishMessage?n("div",{staticClass:"round border drop-shadow bg:white p:32|32 flex flex-direction:column gap:16"},[n("div",{staticClass:"font-size:1.6rem font-weight:bold"},[e._v("\n        "+e._s(e.$t("activity.tasks.messages.pleaseInputAnswer"))+"\n      ")]),e._v(" "),n("InputText",{model:{value:e.answerTaskModal.answer,callback:function(t){e.$set(e.answerTaskModal,"answer",t)},expression:"answerTaskModal.answer"}}),e._v(" "),n("div",{staticClass:"flex justify-content:flex-end"},[n("Button",{attrs:{type:"secondary"},on:{click:function(t){e.answerTaskModal.show=!1}}},[e._v("\n          "+e._s(e.$t("common.actions.cancel"))+"\n        ")]),e._v(" "),n("Button",{staticClass:"ml:16",attrs:{type:"primary"},on:{click:e.submitAnswerTask}},[e._v("\n          "+e._s(e.$t("common.actions.submit"))+"\n        ")])],1)],1):n("div",{staticClass:"round border drop-shadow bg:white p:32|32 flex flex-direction:column gap:16"},[n("div",{staticClass:"font-size:1.6rem font-weight:bold"},[e._v("\n        "+e._s(e.$t("activity.tasks.messages.answerTaskSucceed"))+"\n      ")]),e._v(" "),n("div",{staticClass:"font-size:1.2rem"},[e._v("\n        "+e._s(e.answerTaskModal.finishMessage)+"\n      ")]),e._v(" "),n("Button",{attrs:{type:"primary"},on:{click:function(n){e.answerTaskModal.show=!1,t.$router.push(t.localePath("/tasks"))}}},[e._v("\n        "+e._s(e.$t("common.actions.close"))+"\n      ")])],1)]):e._e()],1)}),[],!1,null,"894ed0bc",null);e.default=component.exports;installComponents(component,{Loading:n(239).default,Dialog:n(386).default,Button:n(372).default,Modal:n(382).default,InputText:n(377).default})}}]);